import{useLocation as F,useNavigate as I}from"react-router-dom";import c from"tailwind-styled-components";import{j as m,a as s,B as S}from"./Button.007af12a.js";import"./Card.44532698.js";import*as y from"react";import{useState as L,useCallback as V,useEffect as A}from"react";import{useForm as H}from"react-hook-form";import P from"react-hot-toast";import C from"swr";import{Accounts as R,PublicAPI as E,Session as N}from"ec.sdk";import"@headlessui/react";import"./jsx-runtime.c05d497c.js";function $({title:e,titleId:t,...r},n){return m("svg",{...Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),children:[e?s("title",{id:t,children:e}):null,s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})]})}const M=y.forwardRef($),B=M;function W({title:e,titleId:t,...r},n){return m("svg",{...Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),children:[e?s("title",{id:t,children:e}):null,s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"})]})}const _=y.forwardRef(W),z=_;function T({title:e,titleId:t,...r},n){return m("svg",{...Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),children:[e?s("title",{id:t,children:e}):null,s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})]})}const U=y.forwardRef(T),G=U;function Z(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}function q(){return{emit:({type:e="success",message:t,title:r})=>{P[e]([r,t])}}}function J(e){return typeof e=="string"?e:typeof e.message=="string"?e.message:"Unknown error"}function K(){const[e,t]=L(!1),r=q();return{notifications:r,withFeedback:async(a,{success:l,error:d,getErrorMessage:g=J})=>{try{t(!0),await a(),r.emit({type:"success",title:l})}catch(p){const f=g(p);console.error(f),console.dir(p),r.emit({type:"error",title:d,message:f})}t(!1)},withPending:async a=>{t(!0),await a(),t(!1)},pending:e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v=function(){return v=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},v.apply(this,arguments)},Q=function(e){return typeof e=="function"},X=function(e){return Q(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Y=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=X(r),a=i[0],l=i[1],d=i[2],g=(d.use||[]).concat(t);return e(a,l,v(v({},d),{use:g}))}},ee=function(e){return function(t,r,n){return n.revalidateOnFocus=!1,n.revalidateIfStale=!1,n.revalidateOnReconnect=!1,e(t,r,n)}},h=Y(C,ee);const b=Object.fromEntries(Object.entries({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).filter(([e])=>e.startsWith("VITE_")).map(([e,t])=>[e.replace("VITE_",""),t]));function te(){return h(["Accounts",b.env],()=>new R(b.env))}function re(e){const{shortID:t,env:r,swrOptions:n}=e,i=h(t?[t,r]:null,()=>new E(t,r,!0).resolve(),n);return A(()=>{i.error&&console.error("error resolving PublicAPI",i.error)},[i.error]),i}function ne(){const e=h(["Session",b.env],()=>{const r=new N(b.env);return r.setClientID("rest"),r}),t=e.data?.getToken();return{...e,token:t}}function ie(){const{pathname:e}=F(),t=e?.split("/")?.[1]?.match(/^[a-f0-9]{8}$/i)?e.split("/")[1]:"",{data:r,error:n}=re({shortID:t,env:b.env,swrOptions:{retryOnError:!1,onError:f=>{console.warn(`error loading public api with shortID "${t}"`,f)}}}),i=!!r,{data:a}=te(),{data:l,mutate:d,token:g}=ne(),p=V(()=>async()=>{l&&await d()},[l]);return{api:r,token:g,apiResolved:i,accounts:a,session:l,updateSession:p}}function oe(e={revalidateOnFocus:!1,dedupingInterval:3e4}){const{api:t}=ie();return C(t?["resource/settings",t?.shortID]:null,()=>se(t),e)}async function se(e){return(await e.entryList("settings",{_count:1,sort:["_created"]})).items[0]}function ae({type:e,depends:t}){const{data:r,mutate:n}=oe(),{handleSubmit:i,reset:a,watch:l,setValue:d,formState:{isValidating:g,isDirty:p}}=H();A(()=>{a({...r})},[r]);const f=l("moduleSettings"),{withFeedback:j,pending:ce}=K(),O=u=>{j(async()=>{const D={visibility:u.moduleSettings.visibility,visibilityApp:u.moduleSettings.visibilityApp};Object.assign(r.moduleSettings,D),await r.save(!0),n()},{success:"Einstellungen gespeichert",error:"Fehler beim Speichern"})};function w(u){return u=u.split(".").slice(1).join("."),Z(f,u)}function k(u){return()=>{d(u,!w(u),{shouldDirty:!0}),O(l())}}function x(u){return w(u)?"text-blue-500":"text-slate-400"}return m("div",{className:"ml-2 gap-2 inline-block text-sm",children:[s(S.Action,{onClick:k("moduleSettings.visibility."+e),$disabled:t?!l("moduleSettings.visibility."+t):!1,tooltip:"f\xFCr Web aktiv",placement:"bottom",children:s(z,{className:`w-5 h-5 ${x("moduleSettings.visibility."+e)}`})}),s(S.Action,{onClick:k("moduleSettings.visibilityApp."+e),$disabled:t?!l("moduleSettings.visibilityApp."+t):!1,tooltip:"f\xFCr App aktiv",placement:"bottom",children:s(G,{className:`w-5 h-5 ${x("moduleSettings.visibilityApp."+e)}`})})]})}const o=c.section``;o.Header=({children:e})=>(console.warn("Section.Header has been renamed to Section.Head for consistency"),s("div",{className:"py-5 px-8 border-b border-gray-200 dark:border-gray-600 flex items-center sm:justify-between sticky top-0 bg-gray-100 dark:bg-gray-900 z-[30]",children:e}));o.Simple=c.div`py-5 px-8 border-b border-gray-200`;o.Caption=c.div`mt-2 max-w-4xl text-sm text-gray-500 p-0`;o.Head=c.div`py-5 px-8 border-b border-gray-200 dark:border-gray-600 flex items-center sm:justify-between sticky top-0 bg-gray-100 dark:bg-gray-900 z-[30]`;o.HeadWhite=c.div`py-5 px-8 border-b border-gray-200 dark:border-gray-600 flex items-center sm:justify-between sticky top-0 bg-white dark:bg-gray-900 z-[30]`;o.Heading=c.h2`m-0 text-lg leading-6 font-medium text-gray-900 dark:text-gray-200`;o.Center=c.div`flex justify-center`;o.HeadingToggle=({children:e,settingsType:t,depends:r})=>m("h2",{className:"m-0 text-lg leading-6 font-medium text-gray-900 dark:text-gray-200 flex items-center",children:[e,s(ae,{type:t,depends:r})]});o.Body=c.div`px-6 py-3`;o.Container=c.div`py-5 px-6 w-full`;o.Divider=c.div`border-b border-gray-200 dark:border-gray-600`;o.Sticky=c.div`sticky top-0 bg-gray-100 dark:bg-gray-900 z-[30]`;o.Menu=c.div`flex`;o.BackButton=()=>{const e=I();return m("div",{className:"flex",children:[m("div",{className:"flex cursor-pointer items-center gap-3 p-3 hover:bg-slate-200 rounded-lg",onClick:()=>e(-1),children:[s(B,{className:"w-4 h-4"})," Zur\xFCck"]}),s("div",{className:"border-r -my-5 border-gray-200 ml-8 mr-8 "})]})};o.Sub=c.h3`text-lg leading-6 font-medium text-gray-900 dark:text-gray-200 !m-0 !mb-0`;
